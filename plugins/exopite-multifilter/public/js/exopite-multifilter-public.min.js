!function(e,i,t,o){"use strict";e.fn.exopiteMultifilter=function(o){var n={loadingFinishedText:"No More Posts Available"},a=function(e,i,t,o,n){switch(i){case"out":e.stop(!0,!1).slideUp(500).css({opacity:0,transition:"opacity .5s"});break;case"in":e.stop(!0,!1).css({opacity:1,transition:"opacity .5s",height:"auto"}).slideDown(500).promise().then(function(){t&&void 0!==wp.hooks&&wp.hooks.doAction("ema-success-animation-end",o,n)})}},s=e.proxy(function(){return this.selector},this);return this.each(function(r,l){var c,d=l,p=(e.extend({},n,o),{filterItems:e(d).find(".exopite-multifilter-filter-item"),nowLoading:e(d).find(".exopite-multifilter-now-loading"),taxonomies:e(d).find(".exopite-multifilter-filter-taxonomy"),searchButton:e(d).find(".exopite-multifilter-filter-reset-search").find('button[type="submit"]'),searchField:e(d).find(".exopite-multifilter-filter-reset-search").find("form").find("input"),reset:e(d).find(".exopite-multifilter-filter-reset"),itemsContainer:e(d).find(".exopite-multifilter-items"),pagination:e(d).find(".exopite-multifilter-paginations"),loading:e(d).find(".exopite-multifilter-now-loading")}),f=!1,u=!1,h=1,m="",g=function(t,o){if(d===t&&"pagination"==o.pagination){var n=e(t).offset().top;if(!(n-e(i).scrollTop()>0))return e("#wpadminbar").length&&(n-=e("#wpadminbar").height()),n-=e("header nav").height(),e("html, body").animate({scrollTop:n},300),t}},v=function(){if(c.display_filter){c.taxonomies_terms=(t={},p.taxonomies.each(function(i,o){var n=e(o).data("taxonomy");t[n]={};var a=[];e(o).find(".active").each(function(i,t){a.push(e(t).data("term"))}),t[n]=a}),t)}var t;p.searchField.length&&(c.search=m),c.paged=h,c.store_session&&localStorage.setItem(s()+r,JSON.stringify({taxonomies_terms:c.taxonomies_terms,paged:h,search:m})),e.ajax({cache:!1,type:"POST",url:wp_ajax.ajax_url,data:{action:"exopite_multifilter_get_posts",json:JSON.stringify(c)},beforeSend:function(){f=!0,void 0!==wp.hooks&&wp.hooks.doAction("ema-before-send",d,c),"pagination"!=c.pagination&&1!=h||a(p.itemsContainer,"out",!1,null,null),"infinite"!=c.pagination&&a(p.pagination,"out",!1,null,null),a(p.loading,"in",!1,null,null)},success:function(t){void 0!==wp.hooks&&wp.hooks.doAction("ema-success-top",d,c),a(p.loading,"out",!1,null,null);var o=e(t),n=o.find("article"),s=o.filter(".no-posts-found");if(n.length>0){var r=o.filter(".exopite-multifilter-paginations").children(":first"),l=p.itemsContainer.data("page")+"page/"+h+"/";if("pagination"==c.pagination||1==h)p.itemsContainer.html(n),"masonry"==c.style?e(p.itemsContainer).css({opacity:1,height:"auto",display:"flex"}):a(p.itemsContainer,"in"),void 0!==wp.hooks&&wp.hooks.doAction("ema-success-items-paginated",d,n),e(d).trigger("success-items-paginated.exopiteMultifilter",[d,n]);else{if(c.display_page_number)n=e('<div class="page-number" data-page="'+l+'">'+h+"</div>").add(n);else c.update_paged&&n.filter("article").first().attr("data-page",l);p.itemsContainer.append(n),void 0!==wp.hooks&&wp.hooks.doAction("ema-success-items-appended",d,n),e(d).trigger("success-items-appended.exopiteMultifilter",[d,n])}void 0!==wp.hooks&&wp.hooks.doAction("ema-success",d,n),e(d).trigger("success-ajax.exopiteMultifilter",[d,n]),c.update_paged&&l!=i.location&&changeBrowserUrl(l),"infinite"!=c.pagination&&(p.pagination.html(r),a(p.pagination,"in",!0,d,c))}else"pagination"!=c.pagination&&1!=h||p.itemsContainer.empty(),p.pagination.html(s),a(p.itemsContainer,"in",!1,null,null),a(p.pagination,"in",!1,null,null),u=!0,setTimeout(function(){p.pagination.fadeOut("fast")},3e3);e(d).find(".nothing-more").length&&setTimeout(function(){p.pagination.fadeOut("fast")},3e3),void 0!==wp.hooks&&wp.hooks.doAction("ema-success-end",d,c),f=!1},error:function(e,i,t){void 0!==wp.hooks&&wp.hooks.doAction("ema-error",d),console.log("Error: "+e.responseText),console.log("Error: "+e),console.log("Error: "+i),console.log("Error: "+t),f=!1}})},x=Exopite.throttle(function(){void 0!==c&&("infinite"==c.pagination&&!f&&!u&&"infinite"==c.pagination&&e(i).scrollTop()>=e(p.itemsContainer).children().last().offset().top+e(p.itemsContainer).children().last().outerHeight()-i.innerHeight&&(h++,void 0!==wp.hooks&&wp.hooks.doAction("ema-bottom-reached",d),v()),c.update_paged&&e("[data-page]").each(function(t,o){var n=e(o).data("page");if(isElementInViewport(o)){if(i.location.href==n)return;changeBrowserUrl(n)}}))},100);e(t).on("scroll",x);var w=function(e){switch(u=!1,h=1,m="","search"!=e&&p.searchField.val(""),e){case"search":m=p.searchField.val();case"reset":p.filterItems.removeClass("active")}};p.searchButton.on("click",function(e){e.preventDefault(),f||""!==p.searchField.val()&&(w("search"),void 0!==wp.hooks&&wp.hooks.doAction("ema-search",d,p.searchField.val()),v())}),p.reset.on("click",function(e){e.preventDefault(),f||(w("reset"),void 0!==wp.hooks&&wp.hooks.doAction("ema-reset",d),v())}),p.filterItems.on("click",function(i){if(i.preventDefault(),!f){if(void 0!==wp.hooks&&wp.hooks.doAction("ema-filter-selected",d),!0===c.multi_selectable)w(),e(this).toggleClass("active");else{var t=e(this).hasClass("active");w("reset"),t||e(this).addClass("active")}v()}}),p.pagination.on("click",".page-numbers, .btn-readmore",function(i){var t,o,n;(i.preventDefault(),f)||(t=e(this),o=t.attr("href"),n=/pages?\/(\d+)/g.exec(o),h=n?n[1]:1,void 0!==wp.hooks&&wp.hooks.doAction("ema-pagination",d),v())}),c=e(d).data("ajax"),e(d).attr("data-index",r),void 0!==wp.hooks&&wp.hooks.addAction("ema-before-send",g,10);void 0!==c&&(c.store_session||c.load_from_url)&&function(){var t,o,n,a,l,f,u=null,g=!1,x=!0;if(c.load_from_url){var w=(f={},i.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,t){f[i]=t}),f).multifilter;if(w&&"null"!==w&&"undefined"!==w){var k=e(d).attr("id");if(k&&"null"!==k&&"undefined"!==k){var y=JSON.parse(decodeURI(w)),_=y[k];if(_&&"null"!==_&&"undefined"!==_){x=!1,u=_,delete y[k];var b=JSON.stringify(y),A=(t=i.location.href,o="multifilter",n=b,a=new RegExp("(\\?|\\&)("+o+"=).*?(&|$)"),l=t,l=t.search(a)>=0?t.replace(a,"$1$2"+n+"$3"):l+(l.indexOf("?")>0?"&":"?")+o+"="+n);"?"==(A=A.replace(/multifilter={}(\&?)/i,"")).charAt(A.length-1)&&(A=A.substr(0,A.length-1)),i.history.replaceState(null,null,A)}}}}c.store_session&&x&&(u=JSON.parse(localStorage.getItem(s()+r))),u&&"null"!==u&&"undefined"!==u&&("pagination"==c.pagination&&(h=u.paged),""!==u.search&&"undefined"!==u.search&&void 0!==u.search?(m=u.search,p.searchField.val(m),g=!0):p.taxonomies.each(function(i,t){var o=Object.keys(u.taxonomies_terms)[i];if(e(t).data("taxonomy")==o){if(u.taxonomies_terms[o].length<1)return!0;e(t).find(".exopite-multifilter-filter-item").each(function(i,t){-1!==e.inArray(e(t).data("term"),u.taxonomies_terms[o])&&(e(t).addClass("active"),g=!0)})}}),void 0!==wp.hooks&&wp.hooks.doAction("ema-load-session",d),(h>1||g)&&v())}()})},e(function(){e(".exopite-multifilter-container").not("ajax-disabled").exopiteMultifilter()})}(jQuery,window,document);
